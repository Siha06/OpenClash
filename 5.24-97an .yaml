# æœºåœºè®¢é˜…ï¼Œç”¨æ¥åšå‰ç½®ä»£ç†
proxy-providers:
  å‰ç½®èŠ‚ç‚¹-æœºåœº1:
    url: "https://vip.subscribe-needay.xyz/api/v1/client/subscribe?token=b13cf84862bbb9a16006eb89ff845424"
    type: http
    interval: 86400
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300
    proxy: hk

# åœ¨è¿™é‡Œæ‰‹åŠ¨æ·»åŠ è½åœ°èŠ‚ç‚¹ï¼Œå¦‚æœå‰ç½®èŠ‚ç‚¹ä¸ç”¨æœºåœºè®¢é˜…ï¼Œéœ€è¦åœ¨è¿™é‡Œæ‰‹åŠ¨æ·»åŠ ç”¨äºå‰ç½®ä»£ç†çš„èŠ‚ç‚¹
proxies: 
  - {name: th1-socks, type: socks5, server: 103.14.164.128, port: 42000, username: bEKzLZRsW3, password: eP0CzfHhXfcy, udp: true, dialer-proxy: å‰ç½®èŠ‚ç‚¹ç»„A-é¦™æ¸¯1}
  - {name: th2-socks, type: socks5, server: 103.14.164.160, port: 42000, username: bEKzLZRsW3, password: eP0CzfHhXfcya, udp: true, dialer-proxy: å‰ç½®èŠ‚ç‚¹ç»„B-é¦™æ¸¯2}
  - {name: th3-socks, type: socks5, server: 103.14.164.161, port: 42000, username: bEKzLZRsW3, password: eP0CzfHhXfcya, udp: true, dialer-proxy: å‰ç½®èŠ‚ç‚¹ç»„C-é¦™æ¸¯3}
  - {name: th4-socks, type: socks5, server: 103.14.164.162, port: 42000, username: bEKzLZRsW3, password: eP0CzfHhXfcya, udp: true, dialer-proxy: å‰ç½®èŠ‚ç‚¹ç»„D-æ—¥æœ¬}
  - {name: th5-socks, type: socks5, server: 103.14.164.163, port: 42000, username: bEKzLZRsW3, password: eP0CzfHhXfcya, udp: true, dialer-proxy: å‰ç½®èŠ‚ç‚¹ç»„E-æ–°åŠ å¡}
  - {name: th6-socks, type: socks5, server: 103.14.164.10, port: 42000, username: bEKzLZRsW3, password: eP0CzfHhXfcya, udp: true, dialer-proxy: å‰ç½®èŠ‚ç‚¹ç»„F-éŸ©å›½å°æ¹¾ç¾å›½}
  - {name: my1-socks, type: socks5, server: 103.9.151.44, port: 45001, username: b0h680f4065d8942, password: wmdajUYEZ6QOXszD4Y, udp: true, dialer-proxy: å‰ç½®èŠ‚ç‚¹ç»„G-å…¶å®ƒåœ°åŒº}
  - {name: my2-socks, type: socks5, server: 103.9.148.198, port: 45001, username: evP6828652cbffbe, password: 2af5wB7SLOKjn9VMCx, udp: true, dialer-proxy: å‰ç½®èŠ‚ç‚¹ç»„A-é¦™æ¸¯1}
  - {name: my3-socks, type: socks5, server: 103.9.151.103, port: 45001, username: kRj680f4065d8e2b, password: rP3sKV7UtZxFBwLpaH, udp: true, dialer-proxy: å‰ç½®èŠ‚ç‚¹ç»„B-é¦™æ¸¯2}
  - { name: hk, type: ss, server: 183.236.51.141, port: 52642, cipher: chacha20-ietf-poly1305, password: 90cf3a75-a10f-4feb-bc9f-b1cc03114f2b, udp: true }

# å…¨å±€é…ç½® 
port: 7890
allow-lan: true
bind-address: "*"
ipv6: false
log-level: warning
mode: rule

profile:
  store-selected: true
  store-fake-ip: true

# DNSæ¨¡å—
dns:
  enable: true
  ipv6: false
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
#    - "geosite:private,cn"
#    - "rule-set:private_domain,cn_domain"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "time.*.com"
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  proxy-server-nameserver:
    - https://223.5.5.5/dns-query

# nameseveræœ€å¥½ç”¨è¿è¥å•†æä¾›çš„DNS
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
 
# å‡ºç«™ç­–ç•¥
proxy-groups: 
  - name: th1
    type: select
    include-all: true
    filter: "th1"

  - name: th2
    type: select
    include-all: true
    filter: "th2"

  - name: th3
    type: select
    include-all: true
    filter: "th3"

  - name: th4
    type: select
    include-all: true
    filter: "th4"

  - name: th5
    type: select
    include-all: true
    filter: "th5"
 
  - name: th6
    type: select
    include-all: true
    filter: "th6"

  - name: my1
    type: select
    include-all: true
    filter: "my1"

  - name: my2
    type: select
    include-all: true
    filter: "my2"

  - name: my3
    type: select
    include-all: true
    filter: "my3"

  - name: å‰ç½®èŠ‚ç‚¹ç»„A-é¦™æ¸¯1
    type: url-test
    use:
    - å‰ç½®èŠ‚ç‚¹-æœºåœº1
    tolerance: 20
    interval: 300
    filter: "(?i)HK"
    
  - name: å‰ç½®èŠ‚ç‚¹ç»„B-é¦™æ¸¯2
    type: url-test
    use:
    - å‰ç½®èŠ‚ç‚¹-æœºåœº1
    tolerance: 20
    interval: 300
    filter: "(?i)Hong|Hong[ \t]*Kong"
    
  - name: å‰ç½®èŠ‚ç‚¹ç»„C-é¦™æ¸¯3
    type: url-test
    use:
    - å‰ç½®èŠ‚ç‚¹-æœºåœº1
    tolerance: 20
    interval: 300
    filter: "æ¸¯"
    
  - name: å‰ç½®èŠ‚ç‚¹ç»„D-æ—¥æœ¬
    type: url-test
    use:
    - å‰ç½®èŠ‚ç‚¹-æœºåœº1
    tolerance: 20
    interval: 300
    filter: "(?i)æ—¥|JP|Japan"

  - name: å‰ç½®èŠ‚ç‚¹ç»„E-æ–°åŠ å¡
    type: url-test
    use:
    - å‰ç½®èŠ‚ç‚¹-æœºåœº1
    tolerance: 20
    interval: 300
    filter: "(?i)æ–°|ç‹®åŸ|SG|Singapore"

  - name: å‰ç½®èŠ‚ç‚¹ç»„F-éŸ©å›½å°æ¹¾ç¾å›½
    type: url-test
    use:
    - å‰ç½®èŠ‚ç‚¹-æœºåœº1
    tolerance: 20
    interval: 300
    filter: "(?i)éŸ©|KR|Korea|å°|TW|Tai[ \t]*wan|Tai[ \t]*pei|ç¾|America|US|USA|United[ \t]*States"

  - name: å‰ç½®èŠ‚ç‚¹ç»„G-å…¶å®ƒåœ°åŒº
    type: url-test
    use:
    - å‰ç½®èŠ‚ç‚¹-æœºåœº1
    tolerance: 20
    interval: 300
    filter: "^(?i)((?!(å‰©ä½™|åˆ°æœŸ|å®˜ç½‘|å±±ä¸œ|æ¸¯|HK|Hong[ \t]*Kong|å°|TW|Tai[ \t]*wan|Tai[ \t]*pei|æ–°|ç‹®åŸ|SG|Singapore|æ—¥|ä¸œç€›|JP|Japan|éŸ©|KR|Korea|ç¾|America|US|USA|United[ \t]*States)).)*$"

  - name: ğŸŒ å…¨éƒ¨èŠ‚ç‚¹
    type: select
    include-all: true
    filter: "^((?!(å‰©ä½™|åˆ°æœŸ|åˆ·æ–°|æœºåœº|å®˜ç½‘|ç§»åŠ¨|è”é€š)).)*$"

rules:
   - SRC-IP-CIDR,10.10.11.0/24,th1
   - SRC-IP-CIDR,10.10.12.0/24,th2
   - SRC-IP-CIDR,10.10.13.0/24,th3
   - SRC-IP-CIDR,10.10.14.0/24,th4
   - SRC-IP-CIDR,10.10.15.0/24,th5
   - SRC-IP-CIDR,10.10.16.0/24,th6
   - SRC-IP-CIDR,10.10.21.0/24,my1
   - SRC-IP-CIDR,10.10.22.0/24,my2
   - SRC-IP-CIDR,10.10.23.0/24,my3

   - GEOSITE,private,DIRECT
   - GEOSITE,cn,DIRECT
   - GEOIP,private,DIRECT,no-resolve
   - GEOIP,cn,DIRECT,no-resolve
   - MATCH,ğŸŒ å…¨éƒ¨èŠ‚ç‚¹

# è§„åˆ™é›†
rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}
rule-providers: 
  private_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"}
  cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"}
  cn_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"}
